<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic QR Code Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .card { max-width: 500px; }
        .data-item { display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div id="loading" class="text-xl font-semibold text-gray-500">Scanning data...</div>
    
    <div id="content" class="card bg-white p-8 rounded-2xl shadow-2xl w-full hidden border-t-4 border-indigo-500">
        <div class="text-center mb-6">
            <!-- Image source is a placeholder; it will be updated by a URL -->
            <img id="profileImage" class="w-24 h-24 rounded-full mx-auto shadow-md mb-3 object-cover" alt="Profile Image" src="https://placehold.co/100x100/ccc/000?text=No+Img">
            <h1 id="displayName" class="text-3xl font-extrabold text-gray-900">Dynamic Profile</h1>
            <p id="displayMessage" class="text-indigo-600 font-medium"></p>
        </div>
        
        <div class="space-y-4 pt-4 border-t border-gray-100">
            <div id="nameContainer" class="data-item p-3 bg-gray-100 rounded-lg hidden">
                <span class="font-semibold text-gray-700">Name:</span>
                <span id="nameValue" class="text-gray-900"></span>
            </div>
            
            <div id="linkContainer" class="data-item p-3 bg-gray-100 rounded-lg hidden">
                <span class="font-semibold text-gray-700">Link:</span>
                <a id="linkValue" href="#" target="_blank" class="text-blue-600 hover:underline"></a>
            </div>
        </div>
        
        <a id="actionLink" href="#" target="_blank" 
           class="mt-8 w-full block text-center py-3 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
            Visit Website
        </a>

        <p class="mt-8 text-xs text-gray-400 text-center">
            This data was dynamically loaded from the QR code parameters.
        </p>
    </div>

    <script>
        function getQueryParams() {
            const params = {};
            const queryString = window.location.search.substring(1);
            const regex = /([^&=]+)=([^&]*)/g;
            let m;
            while (m = regex.exec(queryString)) {
                // Decode components
                params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
            }
            return params;
        }

        window.onload = function() {
            const params = getQueryParams();
            
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('content').classList.remove('hidden');

            const name = params['name'];
            const message = params['msg'];
            const link = params['url'];
            const imageUrl = params['img']; // Reading the standard Image URL

            // 1. Set Name and Message
            document.getElementById('displayName').innerText = name || 'User Profile';
            document.getElementById('displayMessage').innerText = message || 'No message provided.';

            // 2. Set Image (Using External URL)
            const imgElement = document.getElementById('profileImage');
            if (imageUrl) {
                imgElement.src = imageUrl;
            } else {
                imgElement.src = "https://placehold.co/100x100/ccc/000?text=No+Img";
            }
            
            // 3. Set Name container visibility
            if (name) {
                document.getElementById('nameValue').innerText = name;
                document.getElementById('nameContainer').classList.remove('hidden');
            }

            // 4. Set Link and Action Button
            const actionLink = document.getElementById('actionLink');
            if (link) {
                document.getElementById('linkValue').innerText = link.length > 40 ? link.substring(0, 37) + '...' : link;
                document.getElementById('linkValue').href = link;
                document.getElementById('linkContainer').classList.remove('hidden');
                actionLink.href = link;
            } else {
                actionLink.classList.add('hidden');
            }
        };
    </script>
</body>
</html>
